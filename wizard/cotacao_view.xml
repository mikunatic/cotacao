<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="cotacao_form_view" model="ir.ui.view">
        <field name="name">Cotacao</field>
        <field name="model">cotacao</field>
        <field name="arch" type="xml">
            <form>
                <group>
                    <field name="partner_id" attrs="{'readonly':[('produtos_cotados','!=',[])]}"/>
                    <field name="partner_street" attrs="{'invisible':[('partner_id','=',False)]}"/>
                    <field name="partner_zip" attrs="{'invisible':[('partner_id','=',False)]}"/>
                    <field name="partner_city" attrs="{'invisible':[('partner_id','=',False)]}"/>
                    <field name="partner_route_id" attrs="{'invisible':[('partner_route_id','=',False)]}"/>
                    <field name="data_vencimento"/>
                    <label for="desejado_id"/>
                    <div class="o_row">
                        <field name="desejado_id" options="{'no_create': True, 'no_create_edit':True, 'no_open':True}"
                               context="{'tree_view_ref': 'cotacao.product_search_more'}"/>
                        <button name="carregaproduto" type="object" string="Mostrar" attrs="{'invisible':[('desejado_id','=',False)]}"/>
                    </div>
                    <field name="qnt_desejado" invisible="True" />
                    <field name="produtos_cotados" attrs="{'invisible':[('produtos_cotados','=',[])]}">
                        <tree editable="True"> <!--decoration-danger="gambiarra = False" decoration-success="gambiarra = True"-->
                            <field name="name" widget="badge" readonly="True"/> <!--attrs="{'decoration-danger':[('gambiarra','=',False)],'decoration-success':[('gambiarra','=',False)]}"-->
                            <field name="standard_price" readonly="True"/>
                            <field name="product_template_attribute_value_ids" widget="many2many_tags" readonly="True"/>
                            <field name="qty_available" readonly="True"/>
                        </tree>
                    </field>
                </group>
                <footer>
                    <button string="Criar Cotação" name="cria_cotacao_reg" type="object" attrs="{'invisible':[('produtos_cotados','=',[])]}"/>
                </footer>
            </form>
        </field>
    </record>
    <record id="cotacao_action" model="ir.actions.act_window">
        <field name="name">Cotacao</field>
        <field name="res_model">cotacao</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>
    <menuitem id="cotacao_sub_menu" action="cotacao_action" name="Cotação" parent="sale.sale_order_menu"/>
    <record id="product_search_more" model="ir.ui.view">
        <field name="name">Product Product Search More</field>
        <field name="model">product.product</field>
        <field name="arch" type="xml">
            <tree>
                <field name="default_code"/>
                <field name="name"/>
                <field name="product_template_attribute_value_ids" widget="many2many_tags"/>
            </tree>
        </field>
    </record>
</odoo>