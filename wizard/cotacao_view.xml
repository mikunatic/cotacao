<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="cotacao_form_view" model="ir.ui.view">
        <field name="name">Cotacao</field>
        <field name="model">cotacao</field>
        <field name="arch" type="xml">
            <form>
                <group>
                    <field name="partner_id" attrs="{'readonly':[('produtos_cotados','!=',[])]}"/>
                    <field name="partner_street" attrs="{'invisible':[('partner_id','=',False)]}"/>
                    <field name="data_vencimento"/>
                    <field name="partner_zip" attrs="{'invisible':[('partner_id','=',False)]}"/>
                    <field name="partner_city" attrs="{'invisible':[('partner_id','=',False)]}"/>
                    <field name="partner_route_id" attrs="{'invisible':[('partner_route_id','=',False)]}"/>
                    <label for="desejado_id"/>
                    <div class="o_row">
                        <field name="desejado_id" options="{'no_create': True, 'no_create_edit':True, 'no_open':True}"/>
                        <button name="carregaproduto" type="object" string="Mostrar" attrs="{'invisible':[('desejado_id','=',False)]}"/>
                    </div>
                    <field name="qnt_desejado" invisible="True" />
                    <!--<field name="alternativo_ids" invisible="True"/>
                    <field name="alternativo" attrs="{'invisible':['|',('qnt_desejado','>',0),('desejado_id','=',False)],'required':[('qnt_desejado','&lt;',1)]}" options="{'no_create': True, 'no_create_edit':True, 'no_open':True}"/>-->
                    <field name="produtos_cotados" readonly="True">
                        <tree> <!--decoration-danger="gambiarra = False" decoration-success="gambiarra = True"-->
                            <field name="name" widget="badge" /> <!--attrs="{'decoration-danger':[('gambiarra','=',False)],'decoration-success':[('gambiarra','=',False)]}"-->
                            <field name="lst_price"/>
                            <field name="product_template_attribute_value_ids" widget="many2many_tags"/>
                            <field name="qty_available"/>
                        </tree>
                    </field>
                </group>
                <footer>
                    <button string="Criar Cotação" name="cria_cotacao_reg" type="object" attrs="{'invisible':[('produtos_cotados','=',[])]}"/>
                </footer>
            </form>
        </field>
    </record>
    <record id="cotacao_action" model="ir.actions.act_window">
        <field name="name">Cotacao</field>
        <field name="res_model">cotacao</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>
    <menuitem id="cotacao_sub_menu" action="cotacao_action" name="Cotação" parent="sale.sale_order_menu"/>
</odoo>